{
    "openapi": "3.0.1",
    "info": {
        "title": "Beckn Final Mile Delivery API",
        "description": "API Spec for Final Mile Delivery",
        "version": "0.8.0-rc2"
    },
    "security": [
        {
            "bearerAuth": []
        }
    ],
    "paths": {
        "/search": {
            "post": {
                "tags": [
                    "Beckn Provider Platform API",
                    "Beckn Gateway API"
                ],
                "description": "Search by intent",
                "requestBody": {
                    "description": "BAP searches for FMD Services",
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "context": {
                                        "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/context.json"
                                    },
                                    "message": {
                                        "type": "object",
                                        "properties": {
                                            "intent": {
                                                "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/final-mile-delivery/v0/schema/fmd_intent.json"
                                            }
                                        }
                                    }
                                },
                                "required": [
                                    "context",
                                    "message"
                                ]
                            },
                            "examples": {
                                "Simple Fmd Intent": {
                                    "value": {
                                        "context": {
                                            "domain": "FINAL-MILE-DELIVERY",
                                            "country": "IND",
                                            "city": "BLR",
                                            "action": "search",
                                            "core_version": "0.8.0",
                                            "domain_version": "0.7.0",
                                            "bpp_id": "",
                                            "bap_id": 110011,
                                            "bg_id": 123444,
                                            "bap_nw_address": "http://bap.api.example.com",
                                            "bpp_nw_address": "",
                                            "bg_nw_address": "",
                                            "request_transaction_id": "83923oio2i3e",
                                            "timestamp": "2020-07-15T06:43:14.653Z",
                                            "token": "eyJhbGciOiJIUzI1N.eyJzdWIiOiIxMjQ.SflKxwRJSMeKKF2QTw5c"
                                        },
                                        "message": {
                                            "intent": {
                                                "pickups": [
                                                    {
                                                        "type": "gps",
                                                        "gps": {
                                                            "lat": "22.346343",
                                                            "lon": "77.823879"
                                                        },
                                                        "time" : {
                                                            "type" : "string",
                                                            "format" : "date-time"
                                                        }
                                                    }
                                                ],
                                                "drops": [
                                                    {
                                                        "type": "gps",
                                                        "gps": {
                                                            "lat": "22.346343",
                                                            "lon": "77.823879"
                                                        }
                                                    }
                                                ],
                                                "packages": [
                                                    {
                                                        "contents": [
                                                            {
                                                                "category_id": "12"
                                                            },
                                                            {
                                                                "category_id": "10"
                                                            }
                                                        ],
                                                        "weight": {
                                                            "estimated_value": "1",
                                                            "unit": "kg"
                                                        }
                                                    }
                                                ]
                                            }
                                        }
                                    }
                                },
                                "Complex Fmd Intent": {
                                    "value": {
                                        "context": {
                                            "domain": "FINAL-MILE-DELIVERY",
                                            "country": "IND",
                                            "city": "BLR",
                                            "action": "search",
                                            "core_version": "0.8.0",
                                            "domain_version": "0.7.0",
                                            "bpp_id": "",
                                            "bap_id": 110011,
                                            "bg_id": 123444,
                                            "bap_nw_address": "http://bap.api.example.com",
                                            "bpp_nw_address": "",
                                            "bg_nw_address": "",
                                            "request_transaction_id": "83923oio2i3e",
                                            "timestamp": "2020-07-15T06:43:14.653Z",
                                            "token": "eyJhbGciOiJIUzI1N.eyJzdWIiOiIxMjQ.SflKxwRJSMeKKF2QTw5c"
                                        },
                                        "message": {
                                            "intent": {
                                                "pickups": [
                                                    {
                                                        "type": "gps",
                                                        "gps": {
                                                            "lat": "22.346343",
                                                            "lon": "77.823879"
                                                        }
                                                    }
                                                ],
                                                "drops": [
                                                    {
                                                        "type": "gps",
                                                        "gps": {
                                                            "lat": "22.346343",
                                                            "lon": "77.823879"
                                                        }
                                                    }
                                                ],
                                                "packages": [
                                                    {
                                                        "contents": [
                                                            {
                                                                "category_id": "12"
                                                            },
                                                            {
                                                                "category_id": "10"
                                                            }
                                                        ],
                                                        "weight": {
                                                            "estimated_value": "1",
                                                            "unit": "kg"
                                                        }
                                                    }
                                                ]
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Acknowledgement of message received",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "context": {
                                            "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/context.json"
                                        },
                                        "message": {
                                            "type": "object",
                                            "properties": {
                                                "ack": {
                                                    "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/ack.json"
                                                }
                                            }
                                        },
                                        "error": {
                                            "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/error.json"
                                        }
                                    }
                                },
                                "examples": {
                                    "Success": {
                                        "value": {
                                            "context": {
                                                "domain": "FINAL-MILE-DELIVERY",
                                                "action": "ack",
                                                "version": "0.7.0",
                                                "bpp_id": "",
                                                "bap_id": "FMD.IND.BLR.BAP.110011",
                                                "bg_id": "FMD.IND.BLR.BG.123444",
                                                "bap_nw_address": "http://bap.api.example.com",
                                                "bpp_nw_address": "",
                                                "bg_nw_address": "",
                                                "timestamp": "2020-07-15T06:43:14.653Z",
                                                "transaction_id": "83923oio2i3e",
                                                "token": "eyJhbGciOiJIUzI1N.eyJzdWIiOiIxMjQ.SflKxwRJSMeKKF2QTw5c"
                                            },
                                            "message": {
                                                "ack": {
                                                    "status": "ACK"
                                                }
                                            },
                                            "error": {}
                                        }
                                    },
                                    "Fail": {
                                        "value": {
                                            "context": {
                                                "domain": "FINAL-MILE-DELIVERY",
                                                "country": "IND",
                                                "city": "BLR",
                                                "action": "nack",
                                                "core_version": "0.8.0",
                                                "domain_version": "0.7.0",
                                                "bpp_id": "",
                                                "bap_id": "FMD.IND.BLR.BAP.110011",
                                                "bg_id": "FMD.IND.BLR.BG.123444",
                                                "bap_nw_address": "http://bap.api.example.com",
                                                "bpp_nw_address": "",
                                                "bg_nw_address": "",
                                                "request_transaction_id": "83923oio2i3e",
                                                "timestamp": "2020-07-15T06:43:14.653Z",
                                                "token": "eyJhbGciOiJIUzI1N.eyJzdWIiOiIxMjQ.SflKxwRJSMeKKF2QTw5c"
                                            },
                                            "message": {
                                                "ack": {
                                                    "status": "NACK"
                                                }
                                            },
                                            "error": {
                                                "r_error": {
                                                    "code": "ERR",
                                                    "message": "Invalid context"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/select": {
            "post": {
                "tags": [
                    "Beckn Provider Platform API"
                ],
                "description": "Select the service and build order. This can be called multiple times. The on_select callback sends an updated quotation everytime the order is updated.",
                "requestBody": {
                    "description": "TODO",
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "context": {
                                        "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/context.json"
                                    },
                                    "message": {
                                        "type": "object",
                                        "properties": {
                                            "order": {
                                                "description": "This is the draft order object containing details of task being carried out like pickup location, drop location and pacakge details",
                                                "allOf": [
                                                    {
                                                        "allOf": [
                                                            {
                                                                "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/final-mile-delivery/v0/schema/fmd_order.json"
                                                            },
                                                            {
                                                                "properties": {
                                                                    "items": {
                                                                        "type": "array",
                                                                        "items": {
                                                                            "allOf": [
                                                                                {
                                                                                    "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/item.json"
                                                                                },
                                                                                {
                                                                                    "required": [
                                                                                        "id"
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    },
                                                                    "tasks": {
                                                                        "type": "array",
                                                                        "items": {
                                                                            "allOf": [
                                                                                {
                                                                                    "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/final-mile-delivery/v0/schema/fmd_task.json"
                                                                                },
                                                                                {
                                                                                    "properties": {
                                                                                        "pickup": {
                                                                                            "allOf": [
                                                                                                {
                                                                                                    "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/final-mile-delivery/v0/schema/fmd_task.json#/properties/pickup"
                                                                                                },
                                                                                                {
                                                                                                    "required": [
                                                                                                        "location",
                                                                                                        "poc"
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        },
                                                                                        "drop": {
                                                                                            "allOf": [
                                                                                                {
                                                                                                    "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/final-mile-delivery/v0/schema/fmd_task.json#/properties/drop"
                                                                                                },
                                                                                                {
                                                                                                    "required": [
                                                                                                        "location",
                                                                                                        "poc"
                                                                                                    ]
                                                                                                }
                                                                                            ]
                                                                                        }
                                                                                    },
                                                                                    "required": [
                                                                                        "item_id",
                                                                                        "pickup",
                                                                                        "drop",
                                                                                        "package"
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    },
                                                                    "packages": {
                                                                        "type": "array",
                                                                        "items": {
                                                                            "allOf": [
                                                                                {
                                                                                    "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/final-mile-delivery/v0/schema/fmd_package.json"
                                                                                },
                                                                                {
                                                                                    "required": [
                                                                                        "contents"
                                                                                    ]
                                                                                }
                                                                            ]
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        ]
                                                    },
                                                    {
                                                        "required": [
                                                            "items",
                                                            "tasks"
                                                        ]
                                                    }
                                                ]
                                            }
                                        },
                                        "required": [
                                            "order"
                                        ]
                                    }
                                },
                                "required": [
                                    "context",
                                    "message"
                                ]
                            },
                            "examples": {
                                "Simple Order": {
                                    "value": {
                                        "context": {
                                            "domain": "FINAL-MILE-DELIVERY",
                                            "country": "IND",
                                            "city": "BLR",
                                            "action": "select",
                                            "core_version": "0.8.0",
                                            "domain_version": "0.7.0",
                                            "bap_nw_address": "http://bap.api.example.com",
                                            "bpp_nw_address": "http://bpp.api.example.com",
                                            "bg_nw_address": "",
                                            "request_transaction_id": "83923oio2i3e",
                                            "timestamp": "2020-07-15T06:43:14.653Z",
                                            "token": "eyJhbGciOiJIUzI1N.eyJzdWIiOiIxMjQ.SflKxwRJSMeKKF2QTw5c"
                                        },
                                        "message": {
                                            "order": {
                                                "id": "",
                                                "items": [
                                                    {
                                                        "id": "1234-5678-12-34-56"
                                                    }
                                                ],
                                                "tasks": [
                                                    {
                                                        "id": "98298323-203982-02309",
                                                        "item_id": "1234-5678-12-34-56",
                                                        "pickup": {
                                                            "location": {
                                                                "address": {
                                                                    "door": "2244",
                                                                    "name": "Croma",
                                                                    "building": "string",
                                                                    "street": "5th Main",
                                                                    "locality": "HSR Layout",
                                                                    "ward": "",
                                                                    "city": "Bengaluru",
                                                                    "state": "Karnataka",
                                                                    "country": "India",
                                                                    "area_code": "560102"
                                                                },
                                                                "gps": {
                                                                    "lat": "22.987987",
                                                                    "lon": "77.232323"
                                                                }
                                                            },
                                                            "instructions": [
                                                                "Please handle with care"
                                                            ],
                                                            "poc": {
                                                                "name": {
                                                                    "given_name": "John"
                                                                },
                                                                "contact": {
                                                                    "mobile": {
                                                                        "country_code": "+91",
                                                                        "number": "9876543210"
                                                                    }
                                                                }
                                                            }
                                                        },
                                                        "drop": {
                                                            "location": {
                                                                "address": {
                                                                    "door": "BB1703",
                                                                    "name": "Salarpuria Greenage",
                                                                    "building": "Birch B Block",
                                                                    "street": "Hosur Road",
                                                                    "locality": "HSR Layout",
                                                                    "ward": "",
                                                                    "city": "Bengaluru",
                                                                    "state": "Karnataka",
                                                                    "country": "India",
                                                                    "area_code": "560068"
                                                                },
                                                                "gps": {
                                                                    "lat": "22.987987",
                                                                    "lon": "77.232323"
                                                                }
                                                            },
                                                            "instructions": [
                                                                "Please don't ring doorbell",
                                                                "Leave package at door"
                                                            ],
                                                            "poc": {
                                                                "name": {
                                                                    "given_name": "Bob"
                                                                },
                                                                "contact": {
                                                                    "mobile": {
                                                                        "country_code": "+91",
                                                                        "number": "9786756453"
                                                                    }
                                                                }
                                                            }
                                                        },
                                                        "package": {
                                                            "contents": [
                                                                {
                                                                    "category_id": "12",
                                                                    "descriptor": {
                                                                        "name": "Soap"
                                                                    }
                                                                },
                                                                {
                                                                    "category_id": "10",
                                                                    "descriptor": {
                                                                        "name": "Potato"
                                                                    }
                                                                }
                                                            ],
                                                            "weight": {
                                                                "estimated_value": "1",
                                                                "unit": "kg"
                                                            }
                                                        }
                                                    }
                                                ]
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Acknowledgement of message received",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "context": {
                                            "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/context.json"
                                        },
                                        "message": {
                                            "type": "object",
                                            "properties": {
                                                "ack": {
                                                    "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/ack.json"
                                                }
                                            }
                                        },
                                        "error": {
                                            "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/error.json"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/catalog": {
            "post": {
                "tags": [
                    "Beckn Provider Platform API"
                ],
                "description": "Fetch catalog of a service based on filters",
                "requestBody": {
                    "description": "TODO",
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "context": {
                                        "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/context.json"
                                    },
                                    "message": {
                                        "type": "object",
                                        "properties": {
                                            "catalog": {
                                                "type": "object",
                                                "properties": {
                                                    "id": {
                                                        "type": "string"
                                                    },
                                                    "brand_id": {
                                                        "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/brand.json#/properties/id"
                                                    },
                                                    "model_id": {
                                                        "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/model.json#/properties/id"
                                                    },
                                                    "offer_id": {
                                                        "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/offer.json#/properties/id"
                                                    },
                                                    "item_id": {
                                                        "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/item.json#/properties/id"
                                                    }
                                                }
                                            }
                                        }
                                    }
                                },
                                "required": [
                                    "context",
                                    "message"
                                ]
                            },
                            "examples": {
                                "Empty Catalog Search": {
                                    "value": {
                                        "context": {
                                            "domain": "FINAL-MILE-DELIVERY",
                                            "country": "IND",
                                            "city": "BLR",
                                            "action": "catalog",
                                            "core_version": "0.8.0",
                                            "domain_version": "0.7.0",
                                            "bap_nw_address": "http://bap.api.example.com",
                                            "bpp_nw_address": "",
                                            "bg_nw_address": "",
                                            "request_transaction_id": "83923oio2i3e",
                                            "timestamp": "2020-07-15T06:43:14.653Z",
                                            "token": "eyJhbGciOiJIUzI1N.eyJzdWIiOiIxMjQ.SflKxwRJSMeKKF2QTw5c"
                                        },
                                        "message": {
                                            "catalog": {
                                                "category_id": "",
                                                "brand_id": "",
                                                "model_id": "",
                                                "offer_id": "",
                                                "item_id": ""
                                            }
                                        }
                                    }
                                },
                                "Get Catalog of Category": {
                                    "value": {
                                        "context": {
                                            "domain": "FINAL-MILE-DELIVERY",
                                            "country": "IND",
                                            "city": "BLR",
                                            "action": "catalog",
                                            "core_version": "0.8.0",
                                            "domain_version": "0.7.0",
                                            "bap_nw_address": "http://bap.api.example.com",
                                            "bpp_nw_address": "",
                                            "bg_nw_address": "",
                                            "request_transaction_id": "83923oio2i3e",
                                            "timestamp": "2020-07-15T06:43:14.653Z",
                                            "token": "eyJhbGciOiJIUzI1N.eyJzdWIiOiIxMjQ.SflKxwRJSMeKKF2QTw5c"
                                        },
                                        "message": {
                                            "catalog": {
                                                "category_id": "12",
                                                "brand_id": "",
                                                "model_id": "",
                                                "offer_id": "",
                                                "item_id": ""
                                            }
                                        }
                                    }
                                },
                                "Get Catalog of a Brand": {
                                    "value": {
                                        "context": {
                                            "domain": "FINAL-MILE-DELIVERY",
                                            "country": "IND",
                                            "city": "BLR",
                                            "action": "catalog",
                                            "core_version": "0.8.0",
                                            "domain_version": "0.7.0",
                                            "bap_nw_address": "http://bap.api.example.com",
                                            "bpp_nw_address": "",
                                            "bg_nw_address": "",
                                            "request_transaction_id": "83923oio2i3e",
                                            "timestamp": "2020-07-15T06:43:14.653Z",
                                            "token": "eyJhbGciOiJIUzI1N.eyJzdWIiOiIxMjQ.SflKxwRJSMeKKF2QTw5c"
                                        },
                                        "message": {
                                            "catalog": {
                                                "category_id": "",
                                                "brand_id": "113",
                                                "model_id": "",
                                                "offer_id": "",
                                                "item_id": ""
                                            }
                                        }
                                    }
                                },
                                "Get Catalog of a Model": {
                                    "value": {
                                        "context": {
                                            "domain": "FINAL-MILE-DELIVERY",
                                            "country": "IND",
                                            "city": "BLR",
                                            "action": "catalog",
                                            "core_version": "0.8.0",
                                            "domain_version": "0.7.0",
                                            "bap_nw_address": "http://bap.api.example.com",
                                            "bpp_nw_address": "",
                                            "bg_nw_address": "",
                                            "request_transaction_id": "83923oio2i3e",
                                            "timestamp": "2020-07-15T06:43:14.653Z",
                                            "token": "eyJhbGciOiJIUzI1N.eyJzdWIiOiIxMjQ.SflKxwRJSMeKKF2QTw5c"
                                        },
                                        "message": {
                                            "catalog": {
                                                "category_id": "",
                                                "brand_id": "",
                                                "model_id": "2144",
                                                "offer_id": "",
                                                "item_id": ""
                                            }
                                        }
                                    }
                                },
                                "Get Catalog of an Offer": {
                                    "value": {
                                        "context": {
                                            "domain": "FINAL-MILE-DELIVERY",
                                            "country": "IND",
                                            "city": "BLR",
                                            "action": "catalog",
                                            "core_version": "0.8.0",
                                            "domain_version": "0.7.0",
                                            "bap_nw_address": "http://bap.api.example.com",
                                            "bpp_nw_address": "",
                                            "bg_nw_address": "",
                                            "request_transaction_id": "83923oio2i3e",
                                            "timestamp": "2020-07-15T06:43:14.653Z",
                                            "token": "eyJhbGciOiJIUzI1N.eyJzdWIiOiIxMjQ.SflKxwRJSMeKKF2QTw5c"
                                        },
                                        "message": {
                                            "catalog": {
                                                "category_id": "",
                                                "brand_id": "",
                                                "model_id": "",
                                                "offer_id": "21",
                                                "item_id": ""
                                            }
                                        }
                                    }
                                },
                                "Get Details of an Item": {
                                    "value": {
                                        "context": {
                                            "domain": "FINAL-MILE-DELIVERY",
                                            "country": "IND",
                                            "city": "BLR",
                                            "action": "catalog",
                                            "core_version": "0.8.0",
                                            "domain_version": "0.7.0",
                                            "bap_nw_address": "http://bap.api.example.com",
                                            "bpp_nw_address": "",
                                            "bg_nw_address": "",
                                            "request_transaction_id": "83923oio2i3e",
                                            "timestamp": "2020-07-15T06:43:14.653Z",
                                            "token": "eyJhbGciOiJIUzI1N.eyJzdWIiOiIxMjQ.SflKxwRJSMeKKF2QTw5c"
                                        },
                                        "message": {
                                            "catalog": {
                                                "category_id": "",
                                                "brand_id": "",
                                                "model_id": "",
                                                "offer_id": "",
                                                "item_id": "19728"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Acknowledgement of message received",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "context": {
                                            "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/context.json"
                                        },
                                        "message": {
                                            "type": "object",
                                            "properties": {
                                                "ack": {
                                                    "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/ack.json"
                                                }
                                            }
                                        },
                                        "error": {
                                            "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/error.json"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/init": {
            "post": {
                "tags": [
                    "Beckn Provider Platform API"
                ],
                "description": "Initialize an Order. At this stage the BAP should send an updated order object with billing and fulfillment details if necessary",
                "requestBody": {
                    "description": "TODO",
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "context": {
                                        "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/context.json"
                                    },
                                    "message": {
                                        "type": "object",
                                        "properties": {
                                            "quotation_id": {
                                                "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/quotation.json#/properties/id"
                                            },
                                            "order": {
                                                "allOf": [
                                                    {
                                                        "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/final-mile-delivery/v0/schema/fmd_order.json"
                                                    },
                                                    {
                                                        "required": [
                                                            "quotation_id",
                                                            "billing"
                                                        ]
                                                    }
                                                ]
                                            }
                                        }
                                    }
                                },
                                "required": [
                                    "context",
                                    "message"
                                ]
                            },
                            "examples": {
                                "Order with Billing Details": {
                                    "value": {
                                        "context": {
                                            "domain": "FINAL-MILE-DELIVERY",
                                            "country": "IND",
                                            "city": "BLR",
                                            "action": "init",
                                            "core_version": "0.8.0",
                                            "domain_version": "0.7.0",
                                            "bap_nw_address": "http://bap.api.example.com",
                                            "bpp_nw_address": "",
                                            "bg_nw_address": "",
                                            "request_transaction_id": "83923oio2i3e",
                                            "timestamp": "2020-07-15T06:43:14.653Z",
                                            "token": "eyJhbGciOiJIUzI1N.eyJzdWIiOiIxMjQ.SflKxwRJSMeKKF2QTw5c"
                                        },
                                        "message": {
                                            "quotation_id": "12224408",
                                            "order": {
                                                "billing": {
                                                    "customer": {
                                                        "organisation_name": "Peppo",
                                                        "email": "billing@peppo.co.in",
                                                        "phones": [
                                                            "+919667288826"
                                                        ]
                                                    },
                                                    "address": {
                                                        "door": "BB1703",
                                                        "building": "No 7",
                                                        "street": "Hosur Road",
                                                        "locality": "HSR Layout",
                                                        "city": "Bengaluru",
                                                        "state": "Karnataka",
                                                        "country": "India",
                                                        "area_code": "560068",
                                                        "landmark": "Near oxford college"
                                                    },
                                                    "tax_number": "SERDV2345T"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Acknowledgement of message received",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "context": {
                                            "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/context.json"
                                        },
                                        "message": {
                                            "type": "object",
                                            "properties": {
                                                "ack": {
                                                    "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/ack.json"
                                                }
                                            }
                                        },
                                        "error": {
                                            "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/error.json"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/confirm": {
            "post": {
                "tags": [
                    "Beckn Provider Platform API"
                ],
                "description": "Checkout from an FMD service. Using this action, the FMD Payer should be able to send proof of payment to the FMD service",
                "requestBody": {
                    "description": "TODO",
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "context": {
                                        "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/context.json"
                                    },
                                    "message": {
                                        "type": "object",
                                        "properties": {
                                            "order": {
                                                "allOf": [
                                                    {
                                                        "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/order.json"
                                                    },
                                                    {
                                                        "properties": {
                                                            "payment": {
                                                                "allOf": [
                                                                    {
                                                                        "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/payment.json"
                                                                    },
                                                                    {
                                                                        "required": [
                                                                            "transaction_id"
                                                                        ]
                                                                    }
                                                                ]
                                                            }
                                                        },
                                                        "required": [
                                                            "id",
                                                            "payment"
                                                        ]
                                                    }
                                                ]
                                            }
                                        }
                                    }
                                },
                                "required": [
                                    "context",
                                    "message"
                                ]
                            },
                            "example": {
                                "context": {
                                    "domain": "FINAL-MILE-DELIVERY",
                                    "country": "IND",
                                    "city": "BLR",
                                    "action": "confirm",
                                    "core_version": "0.8.0",
                                    "domain_version": "0.7.0",
                                    "bap_nw_address": "http://bap.api.example.com",
                                    "bpp_nw_address": "",
                                    "bg_nw_address": "",
                                    "request_transaction_id": "83923oio2i3e",
                                    "timestamp": "2020-07-15T06:43:14.653Z",
                                    "token": "eyJhbGciOiJIUzI1N.eyJzdWIiOiIxMjQ.SflKxwRJSMeKKF2QTw5c"
                                },
                                "message": {
                                    "order_id": "9872938932",
                                    "payment": {
                                        "transaction_id": "iuy834u938u938",
                                        "amount": {
                                            "value": "250",
                                            "currency": "INR"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Acknowledgement of message received",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "context": {
                                            "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/context.json"
                                        },
                                        "message": {
                                            "type": "object",
                                            "properties": {
                                                "ack": {
                                                    "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/ack.json"
                                                }
                                            }
                                        },
                                        "error": {
                                            "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/error.json"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/status": {
            "post": {
                "tags": [
                    "Beckn Provider Platform API"
                ],
                "description": "Fetch the status of an FMD Service",
                "requestBody": {
                    "description": "TODO",
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "context": {
                                        "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/context.json"
                                    },
                                    "message": {
                                        "type": "object",
                                        "properties": {
                                            "order_id": {
                                                "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/order.json#/properties/id"
                                            }
                                        },
                                        "required": [
                                            "order_id"
                                        ]
                                    }
                                },
                                "required": [
                                    "context",
                                    "message"
                                ]
                            },
                            "example": {
                                "context": {
                                    "domain": "FINAL-MILE-DELIVERY",
                                    "country": "IND",
                                    "city": "BLR",
                                    "action": "status",
                                    "core_version": "0.8.0",
                                    "domain_version": "0.7.0",
                                    "bap_nw_address": "http://bap.api.example.com",
                                    "bpp_nw_address": "",
                                    "bg_nw_address": "",
                                    "request_transaction_id": "83923oio2i3e",
                                    "timestamp": "2020-07-15T06:43:14.653Z",
                                    "token": "eyJhbGciOiJIUzI1N.eyJzdWIiOiIxMjQ.SflKxwRJSMeKKF2QTw5c"
                                },
                                "message": {
                                    "order_id": "12224408"
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Acknowledgement of message received",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "context": {
                                            "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/context.json"
                                        },
                                        "message": {
                                            "type": "object",
                                            "properties": {
                                                "ack": {
                                                    "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/ack.json"
                                                }
                                            }
                                        },
                                        "error": {
                                            "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/error.json"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/update": {
            "post": {
                "tags": [
                    "Beckn Provider Platform API"
                ],
                "description": "Remove object",
                "requestBody": {
                    "description": "TODO",
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "context": {
                                        "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/context.json"
                                    },
                                    "message": {
                                        "type": "object",
                                        "properties": {
                                            "update_action": {
                                                "type": "string",
                                                "enum": [
                                                    "update_pickup_location",
                                                    "update_pickup_poc",
                                                    "update_pickup_instructions",
                                                    "update_drop_location",
                                                    "update_drop_poc",
                                                    "update_drop_instructions",
                                                    "update_package",
                                                    "update_billing"
                                                ]
                                            },
                                            "order": {
                                                "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/order.json"
                                            }
                                        }
                                    }
                                }
                            },
                            "examples": {
                                "Update pickup location": {
                                    "value": {
                                        "context": {
                                            "domain": "FINAL-MILE-DELIVERY",
                                            "country": "IND",
                                            "city": "BLR",
                                            "action": "update",
                                            "core_version": "0.8.0",
                                            "domain_version": "0.7.0",
                                            "bap_nw_address": "http://bap.api.example.com",
                                            "bpp_nw_address": "",
                                            "bg_nw_address": "",
                                            "request_transaction_id": "83923oio2i3e",
                                            "timestamp": "2020-07-15T06:43:14.653Z",
                                            "token": "eyJhbGciOiJIUzI1N.eyJzdWIiOiIxMjQ.SflKxwRJSMeKKF2QTw5c"
                                        },
                                        "message": {
                                            "update_action": "update_pickup_location",
                                            "order": {
                                                "tasks": [
                                                    {
                                                        "id": "bGciOiJIUzI",
                                                        "pickup": {
                                                            "location": {
                                                                "address": {
                                                                    "door": "EB1703",
                                                                    "building": "No 7",
                                                                    "street": "Hosur Road",
                                                                    "locality": "HSR Layout, Sector 2",
                                                                    "city": "Bengaluru",
                                                                    "state": "Karnataka",
                                                                    "country": "India",
                                                                    "area_code": "560068",
                                                                    "landmark": "Near oxford college"
                                                                }
                                                            }
                                                        }
                                                    }
                                                ]
                                            }
                                        }
                                    }
                                },
                                "Update drop location": {
                                    "value": {
                                        "context": {
                                            "domain": "FINAL-MILE-DELIVERY",
                                            "country": "IND",
                                            "city": "BLR",
                                            "action": "update",
                                            "core_version": "0.8.0",
                                            "domain_version": "0.7.0",
                                            "bap_nw_address": "http://bap.api.example.com",
                                            "bpp_nw_address": "",
                                            "bg_nw_address": "",
                                            "request_transaction_id": "83923oio2i3e",
                                            "timestamp": "2020-07-15T06:43:14.653Z",
                                            "token": "eyJhbGciOiJIUzI1N.eyJzdWIiOiIxMjQ.SflKxwRJSMeKKF2QTw5c"
                                        },
                                        "message": {
                                            "update_action": "update_drop_location",
                                            "order": {
                                                "tasks": [
                                                    {
                                                        "id": "bGciOiJIUzI",
                                                        "drop": {
                                                            "location": {
                                                                "address": {
                                                                    "door": "EB1703",
                                                                    "building": "No 7",
                                                                    "street": "Hosur Road",
                                                                    "locality": "HSR Layout, Sector 2",
                                                                    "city": "Bengaluru",
                                                                    "state": "Karnataka",
                                                                    "country": "India",
                                                                    "area_code": "560068",
                                                                    "landmark": "Near oxford college"
                                                                }
                                                            }
                                                        }
                                                    }
                                                ]
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Acknowledgement of message received",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "context": {
                                            "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/context.json"
                                        },
                                        "message": {
                                            "type": "object",
                                            "properties": {
                                                "ack": {
                                                    "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/ack.json"
                                                }
                                            }
                                        },
                                        "error": {
                                            "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/error.json"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/track": {
            "post": {
                "tags": [
                    "Beckn Provider Platform API"
                ],
                "description": "Track an item during an active service",
                "requestBody": {
                    "description": "TODO",
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "context": {
                                        "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/context.json"
                                    },
                                    "message": {
                                        "type": "object",
                                        "properties": {
                                            "order_id": {
                                                "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/order.json#/properties/id"
                                            },
                                            "callback_url": {
                                                "type": "string",
                                                "format": "url"
                                            }
                                        },
                                        "required": [
                                            "order_id",
                                            "tracking"
                                        ]
                                    }
                                },
                                "required": [
                                    "context",
                                    "message"
                                ]
                            },
                            "examples": {
                                "Location Polling": {
                                    "value": {
                                        "context": {
                                            "domain": "FINAL-MILE-DELIVERY",
                                            "country": "IND",
                                            "city": "BLR",
                                            "action": "track",
                                            "core_version": "0.8.0",
                                            "domain_version": "0.7.0",
                                            "bap_nw_address": "http://bap.api.example.com",
                                            "bpp_nw_address": "",
                                            "bg_nw_address": "",
                                            "request_transaction_id": "83923oio2i3e",
                                            "timestamp": "2020-07-15T06:43:14.653Z",
                                            "token": "eyJhbGciOiJIUzI1N.eyJzdWIiOiIxMjQ.SflKxwRJSMeKKF2QTw5c"
                                        },
                                        "message": {
                                            "order_id": "12224408"
                                        }
                                    }
                                },
                                "Location Push using Websocket": {
                                    "value": {
                                        "context": {
                                            "domain": "FINAL-MILE-DELIVERY",
                                            "country": "IND",
                                            "city": "BLR",
                                            "action": "track",
                                            "core_version": "0.8.0",
                                            "domain_version": "0.7.0",
                                            "bap_nw_address": "http://bap.api.example.com",
                                            "bpp_nw_address": "",
                                            "bg_nw_address": "",
                                            "request_transaction_id": "83923oio2i3e",
                                            "timestamp": "2020-07-15T06:43:14.653Z",
                                            "token": "eyJhbGciOiJIUzI1N.eyJzdWIiOiIxMjQ.SflKxwRJSMeKKF2QTw5c"
                                        },
                                        "message": {
                                            "order_id": "12224408",
                                            "callback_url": "ws://bap.track.com:4000"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Acknowledgement of message received",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "context": {
                                            "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/context.json"
                                        },
                                        "message": {
                                            "type": "object",
                                            "properties": {
                                                "ack": {
                                                    "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/ack.json"
                                                }
                                            }
                                        },
                                        "error": {
                                            "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/error.json"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/cancel": {
            "post": {
                "tags": [
                    "Beckn Provider Platform API"
                ],
                "description": "Cancel an Order",
                "requestBody": {
                    "description": "TODO",
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "context": {
                                        "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/context.json"
                                    },
                                    "message": {
                                        "type": "object",
                                        "properties": {
                                            "order_id": {
                                                "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/order.json#/properties/id"
                                            },
                                            "reason_id": {
                                                "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/option.json#/properties/id"
                                            }
                                        }
                                    }
                                }
                            },
                            "examples": {
                                "Cancellation Request": {
                                    "value": {
                                        "context": {
                                            "domain": "FINAL-MILE-DELIVERY",
                                            "country": "IND",
                                            "city": "BLR",
                                            "action": "cancel",
                                            "core_version": "0.8.0",
                                            "domain_version": "0.7.0",
                                            "bap_nw_address": "http://bap.api.example.com",
                                            "bpp_nw_address": "",
                                            "bg_nw_address": "",
                                            "request_transaction_id": "83923oio2i3e",
                                            "timestamp": "2020-07-15T06:43:14.653Z",
                                            "token": "eyJhbGciOiJIUzI1N.eyJzdWIiOiIxMjQ.SflKxwRJSMeKKF2QTw5c"
                                        },
                                        "message": {
                                            "order_id": "12224408"
                                        }
                                    }
                                },
                                "Cancellation Confirmation": {
                                    "value": {
                                        "context": {
                                            "domain": "FINAL-MILE-DELIVERY",
                                            "country": "IND",
                                            "city": "BLR",
                                            "action": "cancel",
                                            "core_version": "0.8.0",
                                            "domain_version": "0.7.0",
                                            "bap_nw_address": "http://bap.api.example.com",
                                            "bpp_nw_address": "",
                                            "bg_nw_address": "",
                                            "request_transaction_id": "83923oio2i3e",
                                            "timestamp": "2020-07-15T06:43:14.653Z",
                                            "token": "eyJhbGciOiJIUzI1N.eyJzdWIiOiIxMjQ.SflKxwRJSMeKKF2QTw5c"
                                        },
                                        "message": {
                                            "order_id": "12224408",
                                            "reason_id": "8928731"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Acknowledgement of message received",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "context": {
                                            "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/context.json"
                                        },
                                        "message": {
                                            "type": "object",
                                            "properties": {
                                                "ack": {
                                                    "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/ack.json"
                                                }
                                            }
                                        },
                                        "error": {
                                            "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/error.json"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/on_search": {
            "post": {
                "tags": [
                    "Beckn App Platform API",
                    "Beckn Gateway API"
                ],
                "description": "Callback response to search",
                "requestBody": {
                    "description": "TODO",
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "context": {
                                        "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/context.json"
                                    },
                                    "message": {
                                        "type": "object",
                                        "properties": {
                                            "catalog": {
                                                "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/catalog.json"
                                            }
                                        }
                                    },
                                    "error": {
                                        "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/error.json"
                                    }
                                }
                            },
                            "examples": {
                                "Single Pickup Single Drop Service": {
                                    "value": {
                                        "context": {
                                            "domain": "FINAL-MILE-DELIVERY",
                                            "country": "IND",
                                            "city": "BLR",
                                            "action": "on_search",
                                            "core_version": "0.8.0",
                                            "domain_version": "0.7.0",
                                            "bap_nw_address": "http://bap.api.example.com",
                                            "bpp_nw_address": "",
                                            "bg_nw_address": "",
                                            "request_transaction_id": "83923oio2i3e",
                                            "timestamp": "2020-07-15T06:43:14.653Z",
                                            "token": "eyJhbGciOiJIUzI1N.eyJzdWIiOiIxMjQ.SflKxwRJSMeKKF2QTw5c"
                                        },
                                        "message": {
                                            "catalog": {
                                                "id": "e63f7247-7bf6-4321-9b0e-640e4e5cdf5f",
                                                "categories": [
                                                    {
                                                        "id": "1",
                                                        "parent_category_id": "",
                                                        "descriptor": {
                                                            "name": "SINGLE-PICKUP-SINGLE-DROP",
                                                            "images": [
                                                                {
                                                                    "type": "url",
                                                                    "url": "https://category1.image.png"
                                                                }
                                                            ]
                                                        }
                                                    }
                                                ],
                                                "brands": [
                                                    {
                                                        "id": "1",
                                                        "descriptor": {
                                                            "name": "Dunzo"
                                                        }
                                                    },
                                                    {
                                                        "id": "2",
                                                        "descriptor": {
                                                            "name": "Shadowfax"
                                                        }
                                                    }
                                                ],
                                                "items": [
                                                    {
                                                        "id": "1",
                                                        "parent_item_id": "",
                                                        "brand_id": "1",
                                                        "descriptor": {
                                                            "id": "1",
                                                            "category_id": "1",
                                                            "name": "Standard",
                                                            "short_desc": "Standard Delivery"
                                                        },
                                                        "price": {
                                                            "currency": "INR",
                                                            "offered_value": {
                                                                "integral": "28"
                                                            }
                                                        }
                                                    },
                                                    {
                                                        "id": "2",
                                                        "category_id": "1",
                                                        "parent_item_id": "",
                                                        "brand_id": "2",
                                                        "descriptor": {
                                                            "id": "1",
                                                            "name": "Assured",
                                                            "short_desc": "Assured Delivery"
                                                        },
                                                        "price": {
                                                            "currency": "INR",
                                                            "offered_value": {
                                                                "integral": "48"
                                                            }
                                                        }
                                                    }
                                                ],
                                                "offers": [
                                                    {
                                                        "id": "1",
                                                        "item_id": "1",
                                                        "descriptor": {
                                                            "name": "First Time User",
                                                            "code": "FIRST",
                                                            "short_desc": "15% off for first time users"
                                                        },
                                                        "start_time": "2020-07-01 00:00:00",
                                                        "end_time": "2020-07-31 00:00:00"
                                                    }
                                                ]
                                            }
                                        },
                                        "error": {}
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Acknowledgement of message received",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "context": {
                                            "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/context.json"
                                        },
                                        "message": {
                                            "type": "object",
                                            "properties": {
                                                "ack": {
                                                    "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/ack.json"
                                                }
                                            }
                                        },
                                        "error": {
                                            "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/error.json"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/on_select": {
            "post": {
                "tags": [
                    "Beckn App Platform API"
                ],
                "description": "Callback response to select/service",
                "requestBody": {
                    "description": "TODO",
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "context": {
                                        "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/context.json"
                                    },
                                    "message": {
                                        "type": "object",
                                        "properties": {
                                            "order": {
                                                "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/final-mile-delivery/v0/schema/fmd_order.json"
                                            },
                                            "quote": {
                                                "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/quotation.json"
                                            }
                                        }
                                    },
                                    "error": {
                                        "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/error.json"
                                    }
                                }
                            },
                            "example": {
                                "context": {
                                    "domain": "FINAL-MILE-DELIVERY",
                                    "country": "IND",
                                    "city": "BLR",
                                    "action": "on_select",
                                    "core_version": "0.8.0",
                                    "domain_version": "0.7.0",
                                    "bap_nw_address": "http://bap.api.example.com",
                                    "bpp_nw_address": "",
                                    "bg_nw_address": "",
                                    "request_transaction_id": "83923oio2i3e",
                                    "timestamp": "2020-07-15T06:43:14.653Z",
                                    "token": "eyJhbGciOiJIUzI1N.eyJzdWIiOiIxMjQ.SflKxwRJSMeKKF2QTw5c"
                                },
                                "message": {
                                    "order": {
                                        "id": "",
                                        "items": [
                                            {
                                                "id": "d02-6ba0-458e",
                                                "quantity": {
                                                    "available": 20
                                                }
                                            }
                                        ]
                                    },
                                    "quote": {
                                        "id": "53248d02-6ba0-458e-8bd3-01e3a89e1f88",
                                        "price": {
                                            "currency": "INR",
                                            "estimated_value": {
                                                "integral": "28"
                                            }
                                        }
                                    }
                                },
                                "error": {}
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Acknowledgement of message received",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "context": {
                                            "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/context.json"
                                        },
                                        "message": {
                                            "type": "object",
                                            "properties": {
                                                "ack": {
                                                    "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/ack.json"
                                                }
                                            }
                                        },
                                        "error": {
                                            "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/error.json"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/on_init": {
            "post": {
                "tags": [
                    "Beckn App Platform API"
                ],
                "description": "Callback response to confirm/service",
                "requestBody": {
                    "description": "TODO",
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "context": {
                                        "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/context.json"
                                    },
                                    "message": {
                                        "type": "object",
                                        "properties": {
                                            "order": {
                                                "allOf": [
                                                    {
                                                        "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/final-mile-delivery/v0/schema/fmd_order.json"
                                                    },
                                                    {
                                                        "required": [
                                                            "id",
                                                            "payment"
                                                        ]
                                                    }
                                                ]
                                            }
                                        }
                                    },
                                    "error": {
                                        "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/error.json"
                                    }
                                }
                            },
                            "examples": {
                                "Created FMD Order": {
                                    "value": {
                                        "context": {
                                            "domain": "FINAL-MILE-DELIVERY",
                                            "country": "IND",
                                            "city": "BLR",
                                            "action": "on_init",
                                            "core_version": "0.8.0",
                                            "domain_version": "0.7.0",
                                            "bap_nw_address": "http://bap.api.example.com",
                                            "bpp_nw_address": "",
                                            "bg_nw_address": "",
                                            "request_transaction_id": "83923oio2i3e",
                                            "timestamp": "2020-07-15T06:43:14.653Z",
                                            "token": "eyJhbGciOiJIUzI1N.eyJzdWIiOiIxMjQ.SflKxwRJSMeKKF2QTw5c"
                                        },
                                        "message": {
                                            "order": {
                                                "id": "23432442",
                                                "payment": {
                                                    "payee": {
                                                        "person": {
                                                            "name": {
                                                                "given_name": "John Doe"
                                                            }
                                                        },
                                                        "endpoint": {
                                                            "type": "bank_account",
                                                            "bank_account": {
                                                                "account_number": "10818675234",
                                                                "account_holder_name": "John Doe",
                                                                "ifsc_code": "SBIN000414"
                                                            }
                                                        }
                                                    },
                                                    "terms": {
                                                        "credit_type": "POSTPAID",
                                                        "settlement_type": "BULK",
                                                        "credit_duration": "30D",
                                                        "mode": "RTGS",
                                                        "method": "ELECTRONIC",
                                                        "penalty_terms": [
                                                            "Delay in payment after due date will incur 10 INR per day of non-payment"
                                                        ]
                                                    }
                                                },
                                                "created_at": "2020-07-16 17:30:00",
                                                "updated_at": "2020-07-16 17:30:00"
                                            }
                                        },
                                        "error": {}
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Acknowledgement of message received",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "context": {
                                            "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/context.json"
                                        },
                                        "message": {
                                            "type": "object",
                                            "properties": {
                                                "ack": {
                                                    "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/ack.json"
                                                }
                                            }
                                        },
                                        "error": {
                                            "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/error.json"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/on_confirm": {
            "post": {
                "tags": [
                    "Beckn App Platform API"
                ],
                "description": "Acknowledge the checkout of a service and send invoice of the FMD service",
                "requestBody": {
                    "description": "TODO",
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "context": {
                                        "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/context.json"
                                    },
                                    "message": {
                                        "type": "object",
                                        "properties": {
                                            "order": {
                                                "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/invoice.json"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Acknowledgement of message received",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "context": {
                                            "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/context.json"
                                        },
                                        "message": {
                                            "type": "object",
                                            "properties": {
                                                "ack": {
                                                    "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/ack.json"
                                                }
                                            }
                                        },
                                        "error": {
                                            "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/error.json"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/on_status": {
            "post": {
                "tags": [
                    "Beckn App Platform API"
                ],
                "description": "Fetch the status of a Service",
                "requestBody": {
                    "description": "TODO",
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "context": {
                                        "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/context.json"
                                    },
                                    "message": {
                                        "type": "object",
                                        "properties": {
                                            "order": {
                                                "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/final-mile-delivery/v0/schema/fmd_order.json"
                                            },
                                            "updated_at": {
                                                "type": "string",
                                                "format": "date-time"
                                            },
                                            "status_refresh": {
                                                "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/duration.json"
                                            }
                                        }
                                    },
                                    "error": {
                                        "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/error.json"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Acknowledgement of message received",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "context": {
                                            "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/context.json"
                                        },
                                        "message": {
                                            "type": "object",
                                            "properties": {
                                                "ack": {
                                                    "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/ack.json"
                                                }
                                            }
                                        },
                                        "error": {
                                            "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/error.json"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/on_track": {
            "post": {
                "tags": [
                    "Beckn App Platform API"
                ],
                "description": "Provide tracking info",
                "requestBody": {
                    "description": "TODO",
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "context": {
                                        "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/context.json"
                                    },
                                    "message": {
                                        "type": "object",
                                        "properties": {
                                            "tracking": {
                                                "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/tracking.json"
                                            }
                                        }
                                    },
                                    "error": {
                                        "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/error.json"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Acknowledgement of message received",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "context": {
                                            "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/context.json"
                                        },
                                        "message": {
                                            "type": "object",
                                            "properties": {
                                                "ack": {
                                                    "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/ack.json"
                                                }
                                            }
                                        },
                                        "error": {
                                            "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/error.json"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/on_cancel": {
            "post": {
                "tags": [
                    "Beckn App Platform API"
                ],
                "description": "Response to cancel service",
                "requestBody": {
                    "description": "TODO",
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "context": {
                                        "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/context.json"
                                    },
                                    "message": {
                                        "type": "object",
                                        "properties": {
                                            "policies": {
                                                "type": "array",
                                                "items": {
                                                    "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/policy.json"
                                                }
                                            },
                                            "reasons": {
                                                "type": "array",
                                                "items": {
                                                    "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/option.json"
                                                }
                                            },
                                            "price": {
                                                "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/price.json"
                                            },
                                            "order": {
                                                "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/final-mile-delivery/v0/schema/fmd_order.json"
                                            }
                                        }
                                    },
                                    "error": {
                                        "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/error.json"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Acknowledgement of message received",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "context": {
                                            "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/context.json"
                                        },
                                        "message": {
                                            "type": "object",
                                            "properties": {
                                                "ack": {
                                                    "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/ack.json"
                                                }
                                            }
                                        },
                                        "error": {
                                            "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/error.json"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/on_update": {
            "post": {
                "tags": [
                    "Beckn App Platform API"
                ],
                "description": "Returns updated service with updated runtime object",
                "requestBody": {
                    "description": "TODO",
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "context": {
                                        "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/context.json"
                                    },
                                    "message": {
                                        "type": "object",
                                        "properties": {
                                            "order": {
                                                "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/final-mile-delivery/v0/schema/fmd_order.json"
                                            }
                                        }
                                    },
                                    "error": {
                                        "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/error.json"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Acknowledgement of message received",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "context": {
                                            "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/context.json"
                                        },
                                        "message": {
                                            "type": "object",
                                            "properties": {
                                                "ack": {
                                                    "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/ack.json"
                                                }
                                            }
                                        },
                                        "error": {
                                            "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/error.json"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/on_catalog": {
            "post": {
                "tags": [
                    "Beckn App Platform API"
                ],
                "description": "Returns catalog of service",
                "requestBody": {
                    "description": "TODO",
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "context": {
                                        "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/context.json"
                                    },
                                    "message": {
                                        "type": "object",
                                        "properties": {
                                            "catalog": {
                                                "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/catalog.json"
                                            }
                                        }
                                    },
                                    "error": {
                                        "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/error.json"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Acknowledgement of message received",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "context": {
                                            "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/context.json"
                                        },
                                        "message": {
                                            "type": "object",
                                            "properties": {
                                                "ack": {
                                                    "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/ack.json"
                                                }
                                            }
                                        },
                                        "error": {
                                            "$ref": "https://raw.githubusercontent.com/beckn/protocol-specifications/master/core/schema/0.8.0/error.json"
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    },
    "components": {
        "securitySchemes": {
            "bearerAuth": {
                "type": "http",
                "scheme": "bearer",
                "bearerFormat": "JWT"
            }
        }
    },
    "servers": [
        {
            "description": "SwaggerHub API Auto Mocking",
            "url": "https://virtserver.swaggerhub.com/beckn/final-mile-delivery/0.7.0-draft02"
        }
    ]
}